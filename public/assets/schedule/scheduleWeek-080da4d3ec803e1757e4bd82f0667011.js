//当日スケジュール描画
function renderTodaySchedule(){var e={};e.viewType="today",callAjaxAndrenderSchedule(e)}function renderTargetSchedule(e,t){var n={};n.view_type=e,n.amount_type=t,callAjaxAndrenderSchedule(n)}function renderSchedule(e){$("#groupResource").empty(),$.each(e.group_list,function(){$("#groupResource").append($("<option>").attr({value:this.key}).text(this.value))});var t=$("#schedule_area");t.empty(),$("#viewDateRange").text(e.view_date_range);var n=$("<tr />").append($("<th />").text("").addClass("days"));$.each(e.view_date_list,function(){var e="";this.holiday?e="sche_week_holiday":this.saturday?e="sche_week_saturday":this.sunday&&(e="sche_week_sunday");var t="";this.today&&(t="sche_week_today");var r=$("<th />").addClass("days").addClass(e).addClass(t),i=executeFormatDateyyyyMMdd(this.date_yyyy_mm_dd,"yyyyMMdd","M/d"),s=$("<span />"),o=i+"("+this.day_of_the_week_name+")";s.text(o);var u=null;this.holiday_memo!=null&&this.holiday_memo!=""&&(u=$("<span />").text(this.holiday_memo)),u==null?r.append(s):r.append(s).append("<br />").append(u),n.append(r)}),t.append($("<thead />").append(n));var r=$("<tbody />");$.each(e.view_resource_schedule,function(){var t=$("<tr />"),n=this.resource_id,i=$("<a />").text(this.name).attr({href:"javascript:void(0)"});i.click(function(){openResourceDetailDialog(n)});var s="td1_schedule";this.resource_type=="003"&&(s="td1_userGroup");var o=$("<td />").addClass(s).append(i).append("<br />"),u=$("<img />").attr({src:calender_img_path}).css("cursor","pointer");u.attr({alt:"月の予定を表示します",title:"月の予定を表示します"}),u.click(function(){moveMonthResource(n)}),o.append(u),t.append(o);var a=this.schedule_list;$.each(a,function(r){o=$("<td />").addClass(s),setSchedule(this.no_time_list,o),setSchedule(this.time_list,o);var i=formatDateyyyyMMdd(e.view_date_list[r].date_yyyy_mm_dd);setAddImage(o,n,i),t.append(o)}),r.append(t)}),t.append(r)}function openResourceDetailDialog(e){var t={};t.resource_id=e,setAjaxDefault(),$.ajax({type:"GET",data:t,url:"/ajax/schedule/get_resource_detail/"}).then(function(e){if(errorCheck(e)==0){e.status_code==-6&&refresh();return}var t=e.result;renderResourceDetailDialog(t)})}function renderResourceDetailDialog(e){var t=e.resource;if(t.resource_type=="001"){$("#userName").text(t.name);var n=e.user_info;$("#readingCharacter").text(n.reading_character),$("#tel").text(n.tel),$("#mail").text(n.mail),$("#belongingUserGroup").text(""),$.each(e.belong_group_list,function(){var e=$("<span />").text(""+this.value);$("#belongingUserGroup").append(e).append("<br />")}),$("#userMemo").html(escapeTextArea(t.memo)),prependDummyText("userDetailDialog"),$("#userDetailDialog").dialog("open"),removeDummyText("userDetailDialog")}else t.resource_type=="002"?($("#facilitiesName").text(t.name),$("#belongingFacilitiesGroup").text(""),$.each(e.belong_group_list,function(){var e=$("<span />").text(""+this.value);$("#belongingFacilitiesGroup").append(e).append("<br />")}),$("#facilitiesMemo").html(escapeTextArea(t.memo)),prependDummyText("facilitiesDetailDialog"),$("#facilitiesDetailDialog").dialog("open"),removeDummyText("facilitiesDetailDialog")):t.resource_type=="003"&&($("#userGroupName").text(t.name),$("#userGroupMemo").html(escapeTextArea(t.memo)),prependDummyText("userGroupDetailDialog"),$("#userGroupDetailDialog").dialog("open"),removeDummyText("userGroupDetailDialog"))}function moveMonthResource(e){viewLoadingMsg(),document.location.href="/scheduleMonthResource/?resource_id="+e};